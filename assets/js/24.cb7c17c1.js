(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{407:function(s,t,a){s.exports=a.p+"assets/img/01.ee2b5239.png"},491:function(s,t,a){"use strict";a.r(t);var n=a(43),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"快速上手"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[s._v("#")]),s._v(" 快速上手")]),s._v(" "),n("p",[n("code",[s._v("rollup")]),s._v(" 仅仅是一款 "),n("code",[s._v("ESM")]),s._v(" 打包工具，并没有其他额外的功能。例如 "),n("code",[s._v("webpack")]),s._v(" 有对开发者友好的 "),n("code",[s._v("HMR")]),s._v(" 热更新功能，"),n("code",[s._v("rollup")]),s._v(" 并不支持类似 "),n("code",[s._v("HMR")]),s._v(" 这种高级特性。"),n("code",[s._v("rollup")]),s._v(" 的诞生并不是为了与 "),n("code",[s._v("webpack")]),s._v(" 全面竞争，"),n("code",[s._v("rollup")]),s._v(" 的初衷是提供一个充分利用 "),n("code",[s._v("ESM")]),s._v(" 各项特性的高效打包器，通过充分利用 "),n("code",[s._v("ESM")]),s._v(" 的各种特性，构建出结构比较扁平且性能比较出众的类库。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(407),alt:"01"}})]),s._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/jwchan1996/rollup-play/blob/main/01-quickly-start",target:"_blank",rel:"noopener noreferrer"}},[s._v("示例代码仓库"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("首先安装 "),n("code",[s._v("rollup")]),s._v(" 依赖：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" rollup --dev\n")])])]),n("p",[n("code",[s._v("rollup")]),s._v(" 打包需要指定入口文件路径以及输出代码格式，下面是可选的代码格式。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("amd     cjs     system      esm     iife    umd\n")])])]),n("p",[s._v("这里选择最适合浏览器的 "),n("code",[s._v("iife")]),s._v("（立即执行函数）格式，默认是 "),n("code",[s._v("esm")]),s._v(" 格式。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" rollup ./src/index.js --format iife\n")])])]),n("p",[s._v("还可以指定打包文件的输出路径。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" rollup ./src/index.js --format iife --file dist/bundle.js\n")])])]),n("p",[s._v("执行打包命令后输出的文件：")]),s._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// dist/bundle.js")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'use strict'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("log")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("msg")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'---------- INFO ----------'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--------------------------'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" messages "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    hi"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hey Guys, I am jwchan~'")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 导入模块成员")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用模块成员")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" msg "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" messages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),n("p",[s._v("可以看到打包后的 "),n("code",[s._v("bundle")]),s._v(" 代码很简洁，相比于 "),n("code",[s._v("webpack")]),s._v(" 打包文件大量的引导代码以及模块函数，这里的代码几乎没有多余的代码。"),n("code",[s._v("rollup")]),s._v(" 就是把我们的代码根据依赖的先后顺序，先后地拼接到了一起。仔细观察打包结果可以发现，"),n("code",[s._v("rollup")]),s._v(" 打包结果只会保留需要用到的部分，对于未引用的部分，都没有输出。这是因为 "),n("code",[s._v("rollup")]),s._v(" 会自动开启 "),n("code",[s._v("tree-shaking")]),s._v(" 来优化打包结果，"),n("code",[s._v("tree-shaking")]),s._v(" 这个概念最早也是在 "),n("code",[s._v("rollup")]),s._v(" 这个工具提出来的。")])])}),[],!1,null,null,null);t.default=e.exports}}]);