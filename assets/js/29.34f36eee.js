(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{380:function(t,a,s){"use strict";s.r(a);var e=s(43),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"docker-è®¿é—®å®¿ä¸»æœºçš„-ip-é…ç½®é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-è®¿é—®å®¿ä¸»æœºçš„-ip-é…ç½®é—®é¢˜"}},[t._v("#")]),t._v(" docker è®¿é—®å®¿ä¸»æœºçš„ ip é…ç½®é—®é¢˜")]),t._v(" "),s("h2",{attrs:{id:"åœºæ™¯æè¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœºæ™¯æè¿°"}},[t._v("#")]),t._v(" åœºæ™¯æè¿°")]),t._v(" "),s("p",[t._v("åœ¨ "),s("code",[t._v("centos7")]),t._v(" è¿è¡Œ "),s("code",[t._v("docker")]),t._v(" å®¹å™¨åº”ç”¨æ—¶ï¼Œéœ€è¦è¿æ¥å®¿ä¸»æœºçš„ "),s("code",[t._v("mysql")]),t._v(" çš„ "),s("code",[t._v("3306")]),t._v(" ç«¯å£ï¼Œå‘ç°è¿æ¥ä¸ä¸Šï¼Œ"),s("code",[t._v("docker")]),t._v(" å®¹å™¨æ— æ³•è®¿é—®å®¿ä¸»æœºçš„ "),s("code",[t._v("mysql")]),t._v(" æ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œåœ¨å®¹å™¨å†…è®¿é—®å¤–éƒ¨ç½‘ç»œæ˜¯å¯ä»¥ "),s("code",[t._v("ping")]),t._v(" é€šçš„ã€‚")]),t._v(" "),s("h2",{attrs:{id:"åŸå› åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸå› åˆ†æ"}},[t._v("#")]),t._v(" åŸå› åˆ†æ")]),t._v(" "),s("p",[t._v("åœ¨ "),s("code",[t._v("centos7")]),t._v(" ä¸Šéƒ¨ç½² "),s("code",[t._v("docker")]),t._v(" å®¹å™¨ï¼Œå…¶ç½‘ç»œæ¨¡å¼é‡‡ç”¨çš„æ˜¯ "),s("code",[t._v("bridge")]),t._v(" æ¨¡å¼ã€‚"),s("br"),t._v("\nå¯åŠ¨ "),s("code",[t._v("docker")]),t._v(" æ—¶ï¼Œ"),s("code",[t._v("docker")]),t._v(" è¿›ç¨‹ä¼šåˆ›å»ºä¸€ä¸ªåä¸º "),s("code",[t._v("docker0")]),t._v(" çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œç”¨äºå®¿ä¸»æœºä¸å®¹å™¨ä¹‹é—´çš„é€šä¿¡ã€‚å½“å¯åŠ¨ä¸€ä¸ª "),s("code",[t._v("docker")]),t._v(" å®¹å™¨æ—¶ï¼Œ"),s("code",[t._v("docker")]),t._v(" å®¹å™¨å°†ä¼šé™„åŠ åˆ°è™šæ‹Ÿç½‘æ¡¥ä¸Šï¼Œå®¹å™¨å†…çš„æŠ¥æ–‡é€šè¿‡ "),s("code",[t._v("docker0")]),t._v(" å‘å¤–è½¬å‘ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœ "),s("code",[t._v("docker")]),t._v(" å®¹å™¨è®¿é—®å®¿ä¸»æœºï¼Œé‚£ä¹ˆ "),s("code",[t._v("docker0")]),t._v(" ç½‘æ¡¥å°†æŠ¥æ–‡ç›´æ¥è½¬å‘åˆ°æœ¬æœºï¼ŒæŠ¥æ–‡çš„æºåœ°å€æ˜¯ "),s("code",[t._v("docker0")]),t._v(" ç½‘æ®µçš„åœ°å€ã€‚è€Œå¦‚æœ "),s("code",[t._v("docker")]),t._v(" å®¹å™¨è®¿é—®å®¿ä¸»æœºä»¥å¤–çš„æœºå™¨ï¼Œ"),s("code",[t._v("docker")]),t._v(" çš„ "),s("code",[t._v("SNAT")]),t._v(" ç½‘æ¡¥ä¼šå°†æŠ¥æ–‡çš„æºåœ°å€è½¬æ¢ä¸ºå®¿ä¸»æœºçš„åœ°å€ï¼Œé€šè¿‡å®¿ä¸»æœºçš„ç½‘å¡å‘å¤–å‘é€ã€‚")]),t._v(" "),s("p",[t._v("å› æ­¤ï¼Œå½“ "),s("code",[t._v("docker")]),t._v(" å®¹å™¨è®¿é—®å®¿ä¸»æœºæ—¶ï¼Œå¦‚æœå®¿ä¸»æœºæœåŠ¡ç«¯å£ä¼šè¢«é˜²ç«å¢™æ‹¦æˆªï¼Œé‚£ä¹ˆå°±æ— æ³•è¿é€šå®¿ä¸»æœºï¼Œå‡ºç° "),s("code",[t._v("No route to host")]),t._v(" çš„é”™è¯¯ã€‚")]),t._v(" "),s("p",[t._v("è€Œè®¿é—®å®¿ä¸»æœºæ‰€åœ¨å±€åŸŸç½‘å†…çš„å…¶ä»–æœºå™¨ï¼Œç”±äºæŠ¥æ–‡çš„æºåœ°å€æ˜¯å®¿ä¸»æœº "),s("code",[t._v("ip")]),t._v("ï¼Œå› æ­¤ï¼Œä¸ä¼šè¢«ç›®çš„æœºå™¨é˜²ç«å¢™æ‹¦æˆªï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®ã€‚")]),t._v(" "),s("h2",{attrs:{id:"è§£å†³é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³é—®é¢˜"}},[t._v("#")]),t._v(" è§£å†³é—®é¢˜")]),t._v(" "),s("p",[t._v("é¦–å…ˆè®¾ç½®äº† "),s("code",[t._v("mysql")]),t._v(" çš„é…ç½®æ–‡ä»¶ï¼Œä¿è¯ "),s("code",[t._v("mysql")]),t._v(" å¯ä»¥è¢«ä»»ä½• "),s("code",[t._v("ip")]),t._v(" è®¿é—®ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mysqld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nbind-address "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0\n")])])]),s("p",[t._v("ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶é‡å¯ç”Ÿæ•ˆã€‚"),s("br"),t._v("\nä½†ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œé˜²ç«å¢™çš„ "),s("code",[t._v("3306")]),t._v(" ç«¯å£ä»ç„¶æ˜¯ä¸å¼€æ”¾å¤–ç½‘è®¿é—®çš„ã€‚")]),t._v(" "),s("p",[t._v("å®¹å™¨è®¿é—®å®¿ä¸»æœºçš„åœ°å€ä½¿ç”¨ "),s("code",[t._v("eth0")]),t._v(" çš„åœ°å€ï¼Œå³å®¿ä¸»æœºå†…ç½‘ "),s("code",[t._v("ip")]),t._v(" åœ°å€ã€‚"),s("br"),t._v("\nè¿è¡Œ "),s("code",[t._v("ipconfig")]),t._v(" å‘½ä»¤ï¼ŒæŸ¥çœ‹ç½‘ç»œçš„è™šæ‹Ÿç½‘æ¡¥ç›¸å…³ä¿¡æ¯ã€‚")]),t._v(" "),s("p",[t._v("æ³¨æ„ï¼šå®¿ä¸»æœºä¼šæŠŠå®¹å™¨ "),s("code",[t._v("ip")]),t._v(" åœ°å€æ®µå½“æˆå¤–ç½‘ "),s("code",[t._v("ip")]),t._v("ã€‚ï¼ˆå½“å‰è¯´æ˜æ˜¯ "),s("code",[t._v("centos7")]),t._v(" ç¯å¢ƒï¼‰")]),t._v(" "),s("p",[t._v("ç¼–è¾‘é˜²ç«å¢™æ–‡ä»¶ "),s("code",[t._v("/etc/firewalld/zones/public.xml")]),t._v("ï¼Œæ·»åŠ ä¸‹é¢ "),s("code",[t._v("docker0")]),t._v(" åœ°å€æ®µåˆ°é…ç½®ï¼š")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("family")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ipv4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("source")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("172.18.0.0/16"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("accept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("rule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("é‡å¯é˜²ç«å¢™ï¼Œ"),s("code",[t._v("docker")]),t._v(" å®¹å™¨å³å¯æ­£å¸¸è®¿é—®å®¿ä¸»æœºç«¯å£ã€‚")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" firewalld restart\n")])])]),s("p",[t._v("ğŸ¨ å¦‚æœæœ‰ç”¨åˆ° "),s("code",[t._v("docker-compose")]),t._v(" å‘½ä»¤ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåä¸º "),s("code",[t._v('br-"docker network id"')]),t._v(" çš„è™šæ‹Ÿç½‘æ¡¥ã€‚"),s("br"),t._v("\nğŸ¨ æ­¤æ—¶åŒæ ·éœ€è¦å°†è™šæ‹Ÿç½‘æ¡¥åœ°å€æ®µé…ç½®åˆ°é˜²ç«å¢™ç™½åå•ï¼Œæ‰èƒ½æ­£å¸¸è®¿é—®ï¼Œæ·»åŠ é…ç½®ï¼š")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("family")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ipv4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("source")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("172.20.0.0/16"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("accept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("rule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/docker/docker_call_host/container_connect_host.png",alt:"image"}})]),t._v(" "),s("h2",{attrs:{id:"æµ‹è¯•ç«¯å£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•ç«¯å£"}},[t._v("#")]),t._v(" æµ‹è¯•ç«¯å£")]),t._v(" "),s("p",[t._v("åœ¨å®¹å™¨ä¸­æµ‹è¯•å®¿ä¸»æœºç«¯å£æ˜¯å¦å¯ä»¥è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨ "),s("code",[t._v("wget å†…ç½‘ip:ç«¯å£")]),t._v(" å‘½ä»¤ã€‚")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".25.162:3306  \nwget: can not connect to remote "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".25.162"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": Host is unreachable  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä¸å¯ä»¥è¿æ¥")]),t._v("\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".25.162:3306\nwget: bad header line: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),t._v(".29-log  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å¯ä»¥è¿æ¥")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);